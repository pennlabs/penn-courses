deploy_version: 0.1.9
applications:
  - name: redis
    image: redis:4.0
  - name: celery
    image: penn-courses-backend
    secret: penn-courses
    cmd:
      - celery
      - worker
      - "-A"
      - PennCourses
      - "-Q"
      - "alerts,celery"
      - "-linfo"
  - name: beat
    image: penn-courses-backend
    secret: penn-courses
    cmd:
      - celery
      - "-A"
      - PennCourses
      - beat
      - "-l"
      - info
      - "--scheduler"
      - "django_celery_beat.schedulers:DatabaseScheduler"
  - name: backend
    image: penn-courses-backend
    secret: penn-courses
    ingress:
      hosts:
        - host: api.penncourses.org
          paths: ["/"]
  - name: plan
    image: penn-course-plan
    secret: penn-courses-plan
    ingress:
      hosts:
        - host: penncourseplan.com
          paths: ["/"]

